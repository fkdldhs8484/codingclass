const sliderWrap = document.querySelector(".slider__wrap");            // 전체 이미지 슬라이드
const sliderImg = document.querySelector(".slider__img");              // 보여지는 영역
const sliderInner = document.querySelector(".slider__inner");          // 움직이는 영역
const slider = document.querySelectorAll(".slider");                   // 이미지
const sliderDot = document.querySelector(".slider__dot");              // 닷 메뉴
const sliderBtn = document.querySelector(".slider__btn");              // 버튼
const sliderBtnPrev = document.querySelector(".slider__btn .prev");    // 왼쪽 버튼
const sliderBtnNext = document.querySelector(".slider__btn .next");    // 오른쪽 버튼

let currentIndex = 0;
let sliderLength = slider.length;
let sliderWidth = slider[0].offsetWidth;
let dotIndex = "";
let interval = 6000;
let sliderTimer = '';
let stopClick = false;
let mouseenterOn = false;

function imgClone() {
    let sliderFirst = slider[0];
    let sliderLast = slider[sliderLength - 1];
    let cloneFirst = sliderFirst.cloneNode(true);
    let cloneLast = sliderLast.cloneNode(true);
    sliderInner.appendChild(cloneFirst);
    sliderInner.insertBefore(cloneLast, sliderFirst);
}

function createDot() {
    // dot 추가
    for (let i = 0; i &lt; sliderLength; i++) {
        dotIndex += "&lt;a href='#' class='dot'&gt;&lt;/a&gt;";
    }

    // dot play & stop 추가
    dotIndex += `&lt;a href='#' class='play'&gt;&lt;/a&gt;`;
    dotIndex += `&lt;a href='#' class='stop'&gt;&lt;/a&gt;`;

    // 적용
    sliderDot.innerHTML = dotIndex;
    // active 추가
    sliderDot.firstElementChild.classList.add("active");
    // 스탑 버튼 감추기
    sliderDot.querySelector('.play').style.display = 'none';
}

function autoPlay() {
    if (stopClick === true || mouseenterOn === true) return;
    // 자동 플레이
    console.log("autoPlay 실행");
    sliderTimer = setInterval(() =&gt; {
        let intervalNum = currentIndex + 1;
        gotoSlider(intervalNum);
    }, interval);
}

function stopPlay() {
    // 플레이 정지
    clearInterval(sliderTimer);
}

function init() {
    // 이미지 복사
    imgClone();

    // 닷 버튼 생성
    createDot();

    // 자동 재생
    autoPlay();
}
init();

function gotoSlider(index) {
    sliderInner.classList.add('transition');
    let posInitial = sliderInner.offsetLeft; // -800
    sliderInner.style.left = -sliderWidth * (index + 1) + "px";
    currentIndex = index;
}

function checkIndex() {
    sliderInner.classList.remove('transition');
    // 마지막 이미지
    if (currentIndex &gt;= sliderLength) {
        sliderInner.style.left = `${-(1 * sliderWidth)}px`;
        currentIndex = 0;
    }
    // 처음 이미지
    else if (currentIndex &lt; 0) {
        sliderInner.style.left = `${-(sliderLength * sliderWidth)}px`;
        currentIndex = sliderLength - 1;
    }

    // 닷 버튼 엑티브 바꿔주기
    document.querySelectorAll('.slider__dot a').forEach(b =&gt; {
        b.classList.remove('active');
    });
    document.querySelectorAll('.slider__dot a')[currentIndex].classList.add('active');
}

// 이전 버튼 클릭
sliderBtnPrev.addEventListener('click', () =&gt; {
    let prevIndex = currentIndex - 1;
    gotoSlider(prevIndex);
});

// 다음 버튼 클릭
sliderBtnNext.addEventListener('click', () =&gt; {
    let nextIndex = currentIndex + 1;
    gotoSlider(nextIndex);
});

// 트랜지션 끝났을 때
sliderInner.addEventListener('transitionend', () =&gt; {
    checkIndex();
});

// 마우스 오버 했을 때 정지
sliderInner.addEventListener('mouseenter', () =&gt; {
    console.log("mouseenter");
    mouseenterOn = true; // 움직일 수 없다
    stopPlay();
});

// 마우스 떠났을 때 재시작
sliderInner.addEventListener('mouseleave', () =&gt; {
    console.log("mouseleave");
    mouseenterOn = false; // 움직일 수 있다.
    clearTimeout(sliderTimer);
    autoPlay();
});

// 플레이 || 스탑 버튼 클릭
const sliderBtnPlay = document.querySelector(".slider__dot .play");    // 플레이 버튼
const sliderBtnStop = document.querySelector(".slider__dot .stop");    // 정지 버튼
sliderBtnPlay.addEventListener('click', () =&gt; {
    stopClick = false;
    console.log("sliderBtnPlay");
    sliderBtnPlay.style.display = 'none';
    sliderBtnStop.style.display = 'inline-block';
    clearTimeout(sliderTimer);
    autoPlay();
});
sliderBtnStop.addEventListener('click', () =&gt; {
    stopClick = true;
    console.log("sliderBtnStop");
    sliderBtnPlay.style.display = 'inline-block';
    sliderBtnStop.style.display = 'none';
    stopPlay();
});

// 닷 버튼 클릭
document.querySelectorAll('.slider__dot a.dot').forEach((a, index) =&gt; {
    a.addEventListener('click', e =&gt; {
        document.querySelectorAll('.slider__dot a.dot').forEach(b =&gt; {
            b.classList.remove('active');
        });
        a.classList.add('active');
        sliderInner.style.left = `${-((index + 1) * sliderWidth)}px`;
        currentIndex = index;
    });
});